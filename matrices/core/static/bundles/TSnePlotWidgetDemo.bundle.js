var TSnePlotWidgetDemo=(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[0],{148:function(e,t,n){n(149),e.exports=n(376)},376:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(30),s=n.n(o),i=n(6),l=n.n(i),c=n(48),u=n.n(c),p=n(143),f=n.n(p);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t,n,a,r,o,s){try{var i=e[o](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(a,r)}function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function y(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=y(this,b(t).call(this,e))).state={plotdata:{metadata:[],perplexities:[]},selectedColourBy:"inferred_cell_type",selectedColourByCategory:"metadata",metadataErrorMessage:null,loadingMetadata:!1},n}var n,a,o,s,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,e),n=t,(a=[{key:"_fetchAndSetState",value:(s=regeneratorRuntime.mark((function e(t,n,a,r,o){var s,i,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState(d({},o,!0)),s=u()(t,n).toString(),e.prev=2,e.next=5,fetch(s);case 5:if((l=e.sent).ok){e.next=8;break}throw new Error("".concat(s," => ").concat(l.status));case 8:return e.t0=this,i={},e.t1=d,e.t2=i,e.t3=a,e.next=15,l.json();case 15:e.t4=e.sent,(0,e.t1)(e.t2,e.t3,e.t4),d(i,r,null),d(i,o,!1),e.t5=i,e.t0.setState.call(e.t0,e.t5),this.state.plotdata.metadata.indexOf("inferred_cell_type")>-1||this.setState({selectedColourBy:this.state.plotdata.metadata[0].value}),e.next=27;break;case 24:e.prev=24,e.t6=e.catch(2),this.setState((d(c={},r,"".concat(e.t6.name,": ").concat(e.t6.message)),d(c,o,!1),c));case 27:case"end":return e.stop()}}),e,this,[[2,24]])})),i=function(){var e=this,t=arguments;return new Promise((function(n,a){var r=s.apply(e,t);function o(e){g(r,n,a,o,i,"next",e)}function i(e){g(r,n,a,o,i,"throw",e)}o(void 0)}))},function(e,t,n,a,r){return i.apply(this,arguments)})},{key:"_fetchAndSetStateMetadata",value:function(e){var t=e.atlasUrl,n=e.experimentAccession,a="json/experiments/".concat(n,"/metadata/tsneplot");this._fetchAndSetState(a,t,"plotdata","metadataErrorMessage","loadingMetadata")}},{key:"_onChangeColourBy",value:function(e,t){this.setState({selectedColourBy:t,selectedColourByCategory:e})}},{key:"componentDidMount",value:function(){this._fetchAndSetStateMetadata(this.props)}},{key:"render",value:function(){var e=this,t=this.props,n=t.height,a=t.atlasUrl,o=t.suggesterEndpoint,s=this.props,i=s.wrapperClassName,l=s.clusterPlotClassName,c=s.expressionPlotClassName,u=this.props,p=u.geneId,m=u.speciesName,d=u.ks,g=u.experimentAccession,h=this.state.plotdata,y=h.metadata,b=h.perplexities,w=this.state,C=w.selectedColourBy,v=w.selectedColourByCategory,x=w.loadingMetadata,_=b.sort((function(e,t){return e-t}));return x?r.a.createElement("p",{className:"row column loading-message"},"Loading, please waitâ€¦"):r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{atlasUrl:a,suggesterEndpoint:o,wrapperClassName:i,clusterPlotClassName:l,expressionPlotClassName:c,speciesName:m,experimentAccession:g,ks:d,metadata:y,selectedColourBy:C,selectedColourByCategory:v,perplexities:b,selectedPerplexity:_[Math.round((_.length-1)/2)],geneId:p,height:n,onChangeColourBy:function(t,n){return e._onChangeColourBy(t,n)},showControls:!1}),r.a.createElement("p",null,"To know more about this experiment please go to ",r.a.createElement("a",{target:"_blank",href:"https://www.ebi.ac.uk/gxa/sc/experiments/".concat(g)},"Single Cell Expression Atlas "),"."))}}])&&h(n.prototype,a),o&&h(n,o),t}(r.a.Component);C.propTypes={atlasUrl:l.a.string,wrapperClassName:l.a.string,clusterPlotClassName:l.a.string,expressionPlotClassName:l.a.string,experimentAccession:l.a.string.isRequired,geneId:l.a.string.isRequired,ks:l.a.arrayOf(l.a.number),suggesterEndpoint:l.a.string,speciesName:l.a.string,height:l.a.number},C.defaultProps={atlasUrl:"https://www.ebi.ac.uk/gxa/sc/",suggesterEndpoint:"json/suggestions",wrapperClassName:"row expanded",clusterPlotClassName:"small-12 large-6 columns",expressionPlotClassName:"small-12 large-6 columns",speciesName:"",height:800,ks:[]};var v=C;n.d(t,"render",(function(){return x}));var x=function(e,t){s.a.render(r.a.createElement(v,e),document.getElementById(t))}}},[[148,1]]]);