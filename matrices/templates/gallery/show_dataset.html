<!--
\file         show_dataset.html
\author       Mike Wicks
\date         March 2021
\version      $Id$
\par
(C) University of Edinburgh, Edinburgh, UK
(C) Heriot-Watt University, Edinburgh, UK

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be
useful but WITHOUT ANY WARRANTY; without even the implied
warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE.  See the GNU General Public License for more
details.

You should have received a copy of the GNU General Public
License along with this program; if not, write to the Free
Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
Boston, MA  02110-1301, USA.
\brief
The show dataset template
-->

{% extends 'includes/base.html' %}

{% load custom %}

{% load static %}

{% block breadcrumb %}

<!-- Breadcrumb Menu -->

			<li><a href="{% url 'home' %}">Home</a></li>

			<li><a href="{% url 'list_imaging_hosts' %}">Sources</a></li>
			<li><a href="{% url 'webgallery_show_imaging_server' server.id %}">{{ server.name }}</a></li>

	{% if project.name != 'ERROR' %}

		{% if group %}

			<li><a href="{% url 'webgallery_show_group' server.id group.id %}">{{ group.name|truncatechars:20 }}</a></li>

		{% endif %}

		{% if projects %}

			{% for project in projects %}

			<li><a href="{% url 'webgallery_show_project' server.id project.id %}">{{ project.name|truncatechars:20 }}</a></li>

			{% endfor %}

		{% endif %}

	{% endif %}

{% endblock %}

{% block details %}

{% endblock %}

{% block content %}

<!-- Page Body -->
<div class="page-body">

<!-- Page Side Bar -->
<div class="page-sidebar">
</div><!-- End of page-sidebar -->

<!-- Page Content -->
<div class="page-content">

{% if dataset.name == 'ERROR' %}

	<p>Dataset {{ dataset.id }} Does NOT Exist!</p>

{% else %}

	<h1>{{ dataset.name }}</h1>

	<br />

{% endif %}

{% if images %}

    <p>Dataset contains {{ dataset.imageCount }} images</p>

	<hr>

<form action="{% url 'webgallery_add_dataset' server.id dataset.id %}" method="post">

	{% csrf_token %}

	<ul class="image-list">

    {% for image in images %}

		<li>

			<div class="card-image-gallery">

				<div class="card-container-gallery">

		    {% if image_flag != 'DISALLOW' %}

					<a href="{% url 'webgallery_add_image' server.id image.id 0 add_from dataset.id %}" onclick="return confirm('Are you sure you want to ADD this Image to Your ACTIVE Image Collection?')"><button class="button button-add"><i class="fa fa-plus"></i></button></a>

			{% endif %}
					<br />

					<label for="image_{{image.id}}">Add to Active Collection?</label>
					<input type="checkbox" id="image_check" value="{{image.id}}" name="checks[]">

					<h5>{{ image.name }}</h5>

			    </div>

				<br />

				<a href="{% url 'webgallery_show_image' server.id image.id %}"><img alt="{{ image.name }}" title="{{ image.name }}" src="{{ image.thumbnail_url  }}" ></a>


			</div>

		</li>

	{% endfor %}

	</ul>

	<button type="submit" class="button button-add" title="Add Selected Images to Image Collection"><i class="fas fa-plus"></i></button>

</form>

<br />
<a href="{% url 'view_active_collection' %}" title="View Active Image Collection"><button class="button button-view"><i class="fas fa-eye"></i></button></a>

<br />
<br />
<button id="toggle" class="button button-delete" title="Toggle Checkboxes"><i class="fas fa-check"></i></button>


{% endif %}

</div><!-- End of page-content -->

</div><!-- End of page-body -->

<script type="text/javascript">

	document.getElementById('toggle').onclick = function() {
	    var checkboxes = document.querySelectorAll('input[type="checkbox"]');
	    for (var checkbox of checkboxes) {
	        checkbox.checked = !checkbox.checked;
	    }
	}

</script>


{% endblock %}
